module.exports=[32319,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},14747,(e,t,a)=>{t.exports=e.x("path",()=>require("path"))},93695,(e,t,a)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70406,(e,t,a)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},18622,(e,t,a)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},22734,(e,t,a)=>{t.exports=e.x("fs",()=>require("fs"))},54799,(e,t,a)=>{t.exports=e.x("crypto",()=>require("crypto"))},62693,(e,t,a)=>{let r=e.r(22734),s=e.r(14747),n=e.r(54799),{createClient:i}=e.r(91020),{NextResponse:l}=e.r(89171),o=i(process.env.SUPABASE_URL||"",process.env.SUPABASE_SERVICE_ROLE_KEY||"");function c(e){return s.extname(e).toLowerCase().slice(1)||"unknown"}function d(){let e=s.join(process.cwd(),"public"),t=[];return!function a(i){if(r.existsSync(i))for(let l of r.readdirSync(i,{withFileTypes:!0})){let o=s.join(i,l.name),d=s.relative(e,o);if(l.isDirectory())[".next","node_modules",".git"].includes(l.name)||a(o);else if([".json",".js",".xml",".html",".txt",".pdf",".png",".jpg",".jpeg",".gif",".svg",".webp",".docx"].includes(s.extname(o)))try{let e=r.readFileSync(o,"utf-8"),a=n.createHash("sha256").update(e).digest("hex"),{table:s,fileType:i}=o.includes("/collections/")?{table:"collections",fileType:"json"}:o.includes("/files/")?{table:"static_files",fileType:c(o)}:o.includes("/config/")?{table:"config_files",fileType:c(o)}:o.includes("/data/")?{table:"data_files",fileType:c(o)}:o.includes("/image/")?{table:"images",fileType:c(o)}:o.includes("/js/")?{table:"javascript_files",fileType:"js"}:o.includes("/resume/")?{table:"resumes",fileType:c(o)}:{table:"unknown",fileType:c(o)};"unknown"!==s&&t.push({path:o,relativePath:d,content:e,hash:a,table:s,fileType:i})}catch(e){console.warn(`⚠️  Failed to read: ${o}`)}}}(e),t}t.exports={POST:async function(e){try{let{action:t}=await e.json();if("pump"===t){let e=d(),t={collections:[],static_files:[],config_files:[],data_files:[],images:[],resumes:[],javascript_files:[],sync_manifest:[]};for(let a of e){let e=s.basename(a.relativePath,s.extname(a.relativePath)),r=c(a.relativePath),n=new Date().toISOString();switch(t.sync_manifest.push({file_path:a.relativePath,file_hash:a.hash,table_name:a.table,last_synced:n}),a.table){case"collections":{let r=a.relativePath.split(s.sep),i=r.findIndex(e=>"collections"===e);if(-1!==i&&i+2<r.length)try{t.collections.push({lang:r[i+1],type:r[i+2],filename:e,file_content:JSON.parse(a.content),file_hash:a.hash,synced_at:n})}catch(e){console.warn(`⚠️  Invalid JSON: ${a.relativePath}`)}break}case"static_files":t.static_files.push({filename:e,file_type:r,file_content:a.content,file_hash:a.hash,synced_at:n});break;case"config_files":try{t.config_files.push({filename:e,file_type:r,file_content:JSON.parse(a.content),file_hash:a.hash,synced_at:n})}catch(e){console.warn(`⚠️  Invalid JSON: ${a.relativePath}`)}break;case"data_files":try{t.data_files.push({filename:e,file_type:r,file_content:JSON.parse(a.content),file_hash:a.hash,synced_at:n})}catch(e){console.warn(`⚠️  Invalid JSON: ${a.relativePath}`)}break;case"images":t.images.push({filename:e,file_path:a.relativePath,mime_type:`image/${r}`,file_hash:a.hash,synced_at:n});break;case"resumes":t.resumes.push({filename:e,file_type:r,file_path:a.relativePath,file_hash:a.hash,synced_at:n});break;case"javascript_files":t.javascript_files.push({filename:e,file_path:a.relativePath,file_content:a.content,file_hash:a.hash,synced_at:n})}}let a=0;for(let[e,r]of Object.entries(t))if(0!==r.length)try{await o.from(e).insert(r),a++}catch(t){console.error(`❌ ${e}: ${t.message}`)}return l.json({status:"success",action:"pump",files_scanned:e.length,tables_loaded:a,details:t})}if("clear"===t){let e=0;for(let t of["sync_manifest","collections","static_files","config_files","data_files","images","resumes","javascript_files"])try{await o.from(t).delete().neq("id",null),e++}catch(e){console.warn(e.message)}return l.json({status:"success",action:"clear",tables_cleared:e})}return l.json({status:"error",error:"Invalid action. Use: pump, clear"},{status:400})}catch(e){return l.json({status:"error",error:e.message},{status:500})}},GET:async function(){try{let e=d(),t={};for(let a of e)t[a.table]=(t[a.table]||0)+1;let a={};for(let e of["collections","static_files","config_files","data_files","images","resumes","javascript_files","sync_manifest"]){let{count:t}=await o.from(e).select("*",{count:"exact",head:!0});a[e]=t||0}return l.json({status:"success",public_folder:{total_files:e.length,by_type:t},database:a,timestamp:new Date().toISOString()})}catch(e){return l.json({status:"error",error:e.message},{status:500})}}}},93333,e=>{"use strict";var t=e.i(47909),a=e.i(74017),r=e.i(96250),s=e.i(59756),n=e.i(61916),i=e.i(74677),l=e.i(69741),o=e.i(16795),c=e.i(87718),d=e.i(95169),u=e.i(47587),p=e.i(66012),f=e.i(70101),h=e.i(26937),_=e.i(10372),m=e.i(93695);e.i(52474);var x=e.i(220),y=e.i(62693);let g=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/admin/data/route",pathname:"/api/admin/data",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/admin/data/route.js",nextConfigOutput:"",userland:y}),{workAsyncStorage:v,workUnitAsyncStorage:R,serverHooks:w}=g;function b(){return(0,r.patchFetch)({workAsyncStorage:v,workUnitAsyncStorage:R})}async function E(e,t,r){g.isDev&&(0,s.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/admin/data/route";y=y.replace(/\/index$/,"")||"/";let v=await g.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!v)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:R,params:w,nextConfig:b,parsedUrl:E,isDraftMode:j,prerenderManifest:S,routerServerContext:C,isOnDemandRevalidate:P,revalidateOnlyGenerated:T,resolvedPathname:A,clientReferenceManifest:O,serverActionsManifest:k}=v,N=(0,l.normalizeAppPath)(y),q=!!(S.dynamicRoutes[N]||S.routes[A]),I=async()=>((null==C?void 0:C.render404)?await C.render404(e,t,E,!1):t.end("This page could not be found"),null);if(q&&!j){let e=!!S.routes[A],t=S.dynamicRoutes[N];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await I();throw new m.NoFallbackError}}let U=null;!q||g.isDev||j||(U="/index"===(U=A)?"/":U);let H=!0===g.isDev||!q,D=q&&!H;k&&O&&(0,i.setManifestsSingleton)({page:y,clientReferenceManifest:O,serverActionsManifest:k});let $=e.method||"GET",M=(0,n.getTracer)(),F=M.getActiveScopeSpan(),K={params:w,prerenderManifest:S,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:H,incrementalCache:(0,s.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,r,s)=>g.onRequestError(e,t,r,s,C)},sharedContext:{buildId:R}},L=new o.NodeNextRequest(e),B=new o.NodeNextResponse(t),J=c.NextRequestAdapter.fromNodeNextRequest(L,(0,c.signalFromNodeResponse)(t));try{let i=async e=>g.handle(J,K).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=M.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let r=a.get("next.route");if(r){let t=`${$} ${r}`;e.setAttributes({"next.route":r,"http.route":r,"next.span_name":t}),e.updateName(t)}else e.updateName(`${$} ${y}`)}),l=!!(0,s.getRequestMeta)(e,"minimalMode"),o=async s=>{var n,o;let c=async({previousCacheEntry:a})=>{try{if(!l&&P&&T&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(s);e.fetchMetrics=K.renderOpts.fetchMetrics;let o=K.renderOpts.pendingWaitUntil;o&&r.waitUntil&&(r.waitUntil(o),o=void 0);let c=K.renderOpts.collectedTags;if(!q)return await (0,p.sendResponse)(L,B,n,K.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(n.headers);c&&(t[_.NEXT_CACHE_TAGS_HEADER]=c),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==K.renderOpts.collectedRevalidate&&!(K.renderOpts.collectedRevalidate>=_.INFINITE_CACHE)&&K.renderOpts.collectedRevalidate,r=void 0===K.renderOpts.collectedExpire||K.renderOpts.collectedExpire>=_.INFINITE_CACHE?void 0:K.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:r}}}}catch(t){throw(null==a?void 0:a.isStale)&&await g.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:P})},!1,C),t}},d=await g.handleResponse({req:e,nextConfig:b,cacheKey:U,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:S,isRoutePPREnabled:!1,isOnDemandRevalidate:P,revalidateOnlyGenerated:T,responseGenerator:c,waitUntil:r.waitUntil,isMinimalMode:l});if(!q)return null;if((null==d||null==(n=d.value)?void 0:n.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(o=d.value)?void 0:o.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});l||t.setHeader("x-nextjs-cache",P?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),j&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,f.fromNodeOutgoingHttpHeaders)(d.value.headers);return l&&q||m.delete(_.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,h.getCacheControlHeader)(d.cacheControl)),await (0,p.sendResponse)(L,B,new Response(d.value.body,{headers:m,status:d.value.status||200})),null};F?await o(F):await M.withPropagatedContext(e.headers,()=>M.trace(d.BaseServerSpan.handleRequest,{spanName:`${$} ${y}`,kind:n.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},o))}catch(t){if(t instanceof m.NoFallbackError||await g.onRequestError(e,t,{routerKind:"App Router",routePath:N,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:P})},!1,C),q)throw t;return await (0,p.sendResponse)(L,B,new Response(null,{status:500})),null}}e.s(["handler",()=>E,"patchFetch",()=>b,"routeModule",()=>g,"serverHooks",()=>w,"workAsyncStorage",()=>v,"workUnitAsyncStorage",()=>R])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d340c4b4._.js.map