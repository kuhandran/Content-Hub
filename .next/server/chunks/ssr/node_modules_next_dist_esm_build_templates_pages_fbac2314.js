module.exports=[71600,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(27669);function i(){let[a,b]=(0,h.useState)("dashboard"),[c,d]=(0,h.useState)(null),[e,f]=(0,h.useState)(null),[i,l]=(0,h.useState)(!0),[m,n]=(0,h.useState)(null),[o,p]=(0,h.useState)(null),[q,r]=(0,h.useState)(null),[s,t]=(0,h.useState)(!1),[u,v]=(0,h.useState)([]),[w,x]=(0,h.useState)(null),[y,z]=(0,h.useState)(null),[A,B]=(0,h.useState)("collections"),[C,D]=(0,h.useState)("en"),[E,F]=(0,h.useState)("config"),[G,H]=(0,h.useState)("pageLayout"),[I,J]=(0,h.useState)(""),[K,L]=(0,h.useState)(null);(0,h.useEffect)(()=>{M(),O()},[]);let M=async()=>{try{l(!0);let a=process.env.NEXT_PUBLIC_API_URL||"/api",b=await fetch(a);if(!b.ok)throw Error(`API returned ${b.status}`);let c=await b.json();d(c),n(null)}catch(b){let a="Failed to connect to API";b instanceof Error&&(a=b.message),n(a),"object"==typeof b&&null!==b&&console.error("API Error:",b)}finally{l(!1)}};function N({label:a,active:b,onClick:c}){return(0,g.jsx)("button",{className:`w-full text-left px-3 py-2 rounded-lg font-semibold transition-colors ${b?"bg-slate-900 text-white":"bg-slate-100 text-slate-900 hover:bg-slate-200"}`,onClick:c,children:a})}let O=async()=>{try{let a=process.env.NEXT_PUBLIC_API_URL||"/api",b=await fetch(`${a}/admin/operations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"status"})}),c=await b.json();f(c)}catch(a){console.error("DB Status Error:",a)}},P=async a=>{try{p(a),r(null);let b=process.env.NEXT_PUBLIC_API_URL||"/api",c=await fetch(`${b}/admin/operations`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:a})}),d=await c.json();"error"===d.status?r({type:"error",text:d.message}):(r({type:"success",text:d.message}),setTimeout(()=>O(),500))}catch(a){r({type:"error",text:a.message})}finally{p(null)}},Q=async()=>{t(!s),s||R()},R=async()=>{try{let a=process.env.NEXT_PUBLIC_API_URL||"/api",b=await fetch(`${a}/admin/logs?limit=50`),c=await b.json();v(c.logs||[])}catch(a){console.error("Error fetching logs:",a)}},S=async a=>{try{x({table:a,status:"syncing"}),p(a);let b=process.env.NEXT_PUBLIC_API_URL||"/api",c=await fetch(`${b}/admin/sync`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:`sync-${a}`})}),d=await c.json();"error"===d.status?(x({table:a,status:"error",message:d.message}),r({type:"error",text:d.message})):(x({table:a,status:"complete",records:d.recordsInserted}),r({type:"success",text:`Synced ${d.recordsInserted} records to ${a}`}),setTimeout(()=>O(),500))}catch(b){x({table:a,status:"error",message:b.message}),r({type:"error",text:b.message})}finally{p(null)}},T=async()=>{try{p("generate-urls");let a=process.env.NEXT_PUBLIC_API_URL||"/api",b=await fetch(`${a}/admin/urls`),c=await b.json();"error"===c.status?r({type:"error",text:c.message}):(z(c.urls),r({type:"success",text:"URLs generated for all tables"}))}catch(a){r({type:"error",text:a.message})}finally{p(null)}},U=async()=>{try{p("cache-all");let a=process.env.NEXT_PUBLIC_API_URL||"/api",b=await fetch(`${a}/admin/cache`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"cache-all"})}),c=await b.json();"error"===c.status?r({type:"error",text:c.message}):r({type:"success",text:"Cached content to Redis (if configured)"})}catch(a){r({type:"error",text:a.message})}finally{p(null)}},V=async()=>{L(null);try{let a=process.env.NEXT_PUBLIC_API_URL||"/api",b={table:A,filename:G,content:I};"collections"===A&&(b.lang=C,b.type=E);let c=await fetch(`${a}/admin/content`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();"error"===d.status?L({type:"error",text:d.message}):L({type:"success",text:"Saved to database"})}catch(a){L({type:"error",text:a.message})}},W=e?.tables?.some(a=>a.exists),X=e?.tables?.every(a=>a.exists);return(0,g.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,g.jsxs)("div",{className:"flex min-h-screen",children:[(0,g.jsxs)("aside",{className:"hidden md:flex w-72 bg-white border-r border-slate-200 flex-col",children:[(0,g.jsxs)("div",{className:"px-6 py-6 border-b border-slate-200",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:"Content Hub"}),(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Admin Control Center"})]}),(0,g.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 text-sm text-slate-700",children:[(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2",children:"Overview"}),(0,g.jsx)(N,{label:"Dashboard",active:"dashboard"===a,onClick:()=>b("dashboard")}),(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2 mt-4",children:"Operations"}),(0,g.jsx)(N,{label:"DB",active:"db"===a,onClick:()=>b("db")}),(0,g.jsx)(N,{label:"Redis Cache",active:"redis"===a,onClick:()=>b("redis")}),(0,g.jsx)(N,{label:"Sync",active:"sync"===a,onClick:()=>b("sync")}),(0,g.jsx)(N,{label:"Generate",active:"generate"===a,onClick:()=>b("generate")}),(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2 mt-4",children:"Content"}),(0,g.jsx)(N,{label:"Editor",active:"editor"===a,onClick:()=>b("editor")}),(0,g.jsx)(N,{label:"Images",active:"images"===a,onClick:()=>b("images")})]}),(0,g.jsx)("div",{className:"px-6 py-4 border-t border-slate-200 text-xs text-slate-500",children:"v2 • Next.js + Supabase"})]}),(0,g.jsxs)("main",{className:"flex-1",children:[(0,g.jsxs)("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Dashboard"}),(0,g.jsx)("div",{className:"text-2xl font-semibold text-slate-800",children:"Control Panel"})]}),(0,g.jsx)("div",{className:"flex items-center gap-3",children:(0,g.jsx)("button",{onClick:M,className:"rounded-full bg-slate-800 text-white px-4 py-2 text-sm font-semibold hover:bg-slate-900",children:"Refresh"})})]}),(0,g.jsxs)("div",{className:"p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,g.jsx)(j,{title:"API",value:m?"Down":"Up",badge:m?"Check":"Healthy",tone:m?"red":"green",subtitle:m||"OK"}),(0,g.jsx)(j,{title:"DB",value:e?.tables?.filter(a=>a.exists).length||0,badge:"tables",tone:"indigo",subtitle:"Supabase"}),(0,g.jsx)(j,{title:"Redis",value:"Cache",badge:"Ops",tone:"cyan",subtitle:"Cache to Redis"}),(0,g.jsx)(j,{title:"Sync",value:"Ready",badge:"Files",tone:"orange",subtitle:"Public → DB"})]}),(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Operations"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"DB, Redis, Sync, Generate"})]})}),q&&(0,g.jsx)("div",{className:`mb-4 p-4 rounded-xl border ${"error"===q.type?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:(0,g.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:"object"==typeof q.text?JSON.stringify(q.text,null,2):q.text})}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,g.jsx)(k,{label:"Generate URLs",onClick:T,loading:"generate-urls"===o,tone:"slate"}),(0,g.jsx)(k,{label:"Cache to Redis",onClick:U,loading:"cache-all"===o,tone:"cyan"}),(0,g.jsx)(k,{label:"Migrate",onClick:()=>P("migrate"),loading:"migrate"===o,tone:"amber"}),(0,g.jsx)(k,{label:"DB Status",onClick:()=>P("status"),loading:"status"===o,tone:"indigo"}),(0,g.jsx)(k,{label:"Create DB",onClick:()=>P("createdb"),disabled:X,loading:"createdb"===o,tone:"emerald"}),(0,g.jsx)(k,{label:"Delete DB",onClick:()=>P("deletedb"),disabled:!W,loading:"deletedb"===o,tone:"rose"}),(0,g.jsx)(k,{label:"Pump Data",onClick:()=>P("pumpdata"),disabled:!X,loading:"pumpdata"===o,tone:"orange"}),(0,g.jsx)(k,{label:"Sync Collections",onClick:()=>S("collections"),loading:"collections"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync Config",onClick:()=>S("config"),loading:"config"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync Data",onClick:()=>S("data"),loading:"data"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync Files",onClick:()=>S("files"),loading:"files"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync Images",onClick:()=>S("image"),loading:"image"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync JS",onClick:()=>S("js"),loading:"js"===o,tone:"blue"}),(0,g.jsx)(k,{label:"Sync Resume",onClick:()=>S("resume"),loading:"resume"===o,tone:"blue"}),(0,g.jsx)(k,{label:s?"Hide Logs":"View Logs",onClick:Q,tone:"slate"})]}),w&&(0,g.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-slate-50 border border-slate-200 text-sm",children:[(0,g.jsx)("div",{className:"font-semibold text-slate-800",children:w.table}),(0,g.jsxs)("div",{className:"text-slate-600",children:["Status: ",w.status,w.records?` • ${w.records} records`:"",w.message?` • ${w.message}`:""]})]}),y&&(0,g.jsx)("div",{className:"mt-4 p-3 rounded-xl bg-indigo-50 border border-indigo-200 text-sm text-indigo-900",children:(0,g.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(y,null,2)})})]}),"// ...existing code... return (",(0,g.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,g.jsx)("div",{className:"p-6 space-y-6",children:(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Content Editor"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"Update DB Contents"}),(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Edit JSON/text and push to Supabase tables."})]})}),K&&(0,g.jsx)("div",{className:`mb-3 p-3 rounded-xl border ${"error"===K.type?"bg-rose-50 border-rose-200 text-rose-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:K.text}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Table"}),(0,g.jsxs)("select",{value:A,onChange:a=>B(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[(0,g.jsx)("option",{value:"collections",children:"collections"}),(0,g.jsx)("option",{value:"config_files",children:"config_files"}),(0,g.jsx)("option",{value:"data_files",children:"data_files"}),(0,g.jsx)("option",{value:"static_files",children:"static_files"}),(0,g.jsx)("option",{value:"javascript_files",children:"javascript_files"})]})]}),"collections"===A&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Lang"}),(0,g.jsx)("input",{value:C,onChange:a=>D(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Type"}),(0,g.jsx)("input",{value:E,onChange:a=>F(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Filename (no extension)"}),(0,g.jsx)("input",{value:G,onChange:a=>H(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Content (JSON or text)"}),(0,g.jsx)("textarea",{value:I,onChange:a=>J(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm min-h-[120px] font-mono"})]}),(0,g.jsx)("div",{className:"mt-4 flex gap-2",children:(0,g.jsx)("button",{onClick:V,className:"rounded-lg bg-emerald-600 text-white px-4 py-2 font-semibold hover:bg-emerald-700",children:"Save"})})]})})}),");",s&&(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Logs"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"Latest API Logs"})]}),(0,g.jsx)("button",{onClick:R,className:"text-sm text-slate-600 hover:text-slate-900",children:"Refresh"})]}),(0,g.jsx)("div",{className:"space-y-2 max-h-64 overflow-auto text-sm",children:u.map((a,b)=>(0,g.jsxs)("div",{className:"border border-slate-200 rounded-xl p-3 bg-slate-50",children:[(0,g.jsx)("div",{className:"font-mono text-xs text-slate-500",children:a.timestamp}),(0,g.jsx)("div",{className:"text-slate-800",children:a.message})]},b))})]})]})]})]})})}function j({title:a,value:b,badge:c,subtitle:d,tone:e="slate"}){return(0,g.jsxs)("div",{className:`rounded-2xl border ${function(a){switch(a){case"green":return"bg-emerald-50 text-emerald-800 border-emerald-200";case"red":return"bg-rose-50 text-rose-800 border-rose-200";case"indigo":return"bg-indigo-50 text-indigo-800 border-indigo-200";case"cyan":return"bg-cyan-50 text-cyan-800 border-cyan-200";case"orange":return"bg-orange-50 text-orange-800 border-orange-200";default:return"bg-slate-50 text-slate-800 border-slate-200"}}(e)} p-4 shadow-sm`,children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("div",{className:"text-sm font-semibold text-slate-500",children:a}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-white/80 border border-white text-slate-600",children:c})]}),(0,g.jsx)("div",{className:"mt-2 text-2xl font-bold",children:b}),(0,g.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:d})]})}function k({label:a,onClick:b,loading:c,disabled:d,tone:e="slate"}){return(0,g.jsx)("button",{onClick:b,disabled:d||c,className:`${{slate:"bg-slate-900 hover:bg-black text-white",cyan:"bg-cyan-600 hover:bg-cyan-700 text-white",amber:"bg-amber-500 hover:bg-amber-600 text-white",indigo:"bg-indigo-600 hover:bg-indigo-700 text-white",emerald:"bg-emerald-600 hover:bg-emerald-700 text-white",rose:"bg-rose-600 hover:bg-rose-700 text-white",orange:"bg-orange-500 hover:bg-orange-600 text-white",blue:"bg-sky-600 hover:bg-sky-700 text-white"}[e]} rounded-xl px-4 py-3 text-sm font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed`,children:c?"Working...":a})}a.s(["default",()=>i],13715);var l=a.i(13715),m=a.i(9193);let n=(0,d.hoist)(l,"default"),o=(0,d.hoist)(l,"getStaticProps"),p=(0,d.hoist)(l,"getStaticPaths"),q=(0,d.hoist)(l,"getServerSideProps"),r=(0,d.hoist)(l,"config"),s=(0,d.hoist)(l,"reportWebVitals"),t=(0,d.hoist)(l,"unstable_getStaticProps"),u=(0,d.hoist)(l,"unstable_getStaticPaths"),v=(0,d.hoist)(l,"unstable_getStaticParams"),w=(0,d.hoist)(l,"unstable_getServerProps"),x=(0,d.hoist)(l,"unstable_getServerSideProps"),y=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:l}),z=(0,m.getHandler)({srcPage:"/index",config:r,userland:l,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});a.s(["config",0,r,"default",0,n,"getServerSideProps",0,q,"getStaticPaths",0,p,"getStaticProps",0,o,"handler",0,z,"reportWebVitals",0,s,"routeModule",0,y,"unstable_getServerProps",0,w,"unstable_getServerSideProps",0,x,"unstable_getStaticParams",0,v,"unstable_getStaticPaths",0,u,"unstable_getStaticProps",0,t],71600)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_fbac2314.js.map