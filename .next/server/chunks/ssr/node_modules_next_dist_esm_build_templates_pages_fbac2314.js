module.exports=[71600,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(31224),f=a.i(27342),g=a.i(8171),h=a.i(27669);function i({data:a}){return a?(0,g.jsx)("pre",{className:"bg-slate-900 text-green-200 rounded-lg p-4 overflow-auto text-xs",style:{maxHeight:400},children:JSON.stringify(a,null,2)}):(0,g.jsx)("div",{className:"text-slate-400",children:"No data"})}function j(){let[a,b]=(0,h.useState)("dashboard"),[c,d]=(0,h.useState)(null),[e,f]=(0,h.useState)(null),[j,m]=(0,h.useState)(!0),[n,o]=(0,h.useState)(null),[p,q]=(0,h.useState)(null),[r,s]=(0,h.useState)(null),[t,u]=(0,h.useState)(!1),[v,w]=(0,h.useState)([]),[x,y]=(0,h.useState)(null),[z,A]=(0,h.useState)(null),[B,C]=(0,h.useState)("collections"),[D,E]=(0,h.useState)("en"),[F,G]=(0,h.useState)("config"),[H,I]=(0,h.useState)("pageLayout"),[J,K]=(0,h.useState)(""),[L,M]=(0,h.useState)(null);(0,h.useEffect)(()=>{N(),P()},[]);let N=async()=>{try{m(!0);let a=await fetch("/api/admin/data");if(!a.ok)throw Error(`API returned ${a.status}`);let b=await a.json();d(b),o(null)}catch(b){let a="Failed to connect to API";b instanceof Error&&(a=b.message),o(a),"object"==typeof b&&null!==b&&console.error("API Error:",b)}finally{m(!1)}};function O({label:a,active:b,onClick:c}){return(0,g.jsx)("button",{className:`w-full text-left px-3 py-2 rounded-lg font-semibold transition-colors ${b?"bg-slate-900 text-white":"bg-slate-100 text-slate-900 hover:bg-slate-200"}`,onClick:c,children:a})}let P=async()=>{try{let a=await fetch("/api/admin/operations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:"status"})}),b=await a.json();f(b)}catch(a){console.error("DB Status Error:",a)}},Q=async a=>{try{q(a),s(null);let b=await fetch("/api/admin/operations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operation:a})}),c=await b.json();"error"===c.status?s({type:"error",text:c.message}):(s({type:"success",text:c.message}),setTimeout(()=>P(),500))}catch(a){s({type:"error",text:a.message})}finally{q(null)}},R=async()=>{u(!t),t||S()},S=async()=>{try{let a=await fetch("/api/admin/logs?limit=50"),b=await a.json();w(b.logs||[])}catch(a){console.error("Error fetching logs:",a)}},T=async a=>{try{y({table:a,status:"syncing"}),q(a);let b=await fetch("/api/admin/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:`sync-${a}`})}),c=await b.json();"error"===c.status?(y({table:a,status:"error",message:c.message}),s({type:"error",text:c.message})):(y({table:a,status:"complete",records:c.recordsInserted}),s({type:"success",text:`Synced ${c.recordsInserted} records to ${a}`}),setTimeout(()=>P(),500))}catch(b){y({table:a,status:"error",message:b.message}),s({type:"error",text:b.message})}finally{q(null)}},U=async()=>{try{q("generate-urls");let a=await fetch("/api/admin/urls"),b=await a.json();"error"===b.status?s({type:"error",text:b.message}):(A(b.urls),s({type:"success",text:"URLs generated for all tables"}))}catch(a){s({type:"error",text:a.message})}finally{q(null)}},V=async()=>{try{q("cache-all");let a=await fetch("/api/admin/cache",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"cache-all"})}),b=await a.json();"error"===b.status?s({type:"error",text:b.message}):s({type:"success",text:"Cached content to Redis (if configured)"})}catch(a){s({type:"error",text:a.message})}finally{q(null)}},W=async()=>{M(null);try{let a={table:B,filename:H,content:J};"collections"===B&&(a.lang=D,a.type=F);let b=await fetch("/api/admin/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();"error"===c.status?M({type:"error",text:c.message}):M({type:"success",text:"Saved to database"})}catch(a){M({type:"error",text:a.message})}},X=e?.tables?.some(a=>a.exists),Y=e?.tables?.every(a=>a.exists);return(0,g.jsx)("div",{className:"min-h-screen bg-slate-50",children:(0,g.jsxs)("div",{className:"flex min-h-screen",children:[(0,g.jsxs)("aside",{className:"hidden md:flex w-72 bg-white border-r border-slate-200 flex-col",children:[(0,g.jsxs)("div",{className:"px-6 py-6 border-b border-slate-200",children:[(0,g.jsx)("div",{className:"text-2xl font-bold text-slate-800",children:"Content Hub"}),(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Admin Control Center"})]}),(0,g.jsxs)("nav",{className:"flex-1 px-4 py-6 space-y-2 text-sm text-slate-700",children:[(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2",children:"Overview"}),(0,g.jsx)(O,{label:"Dashboard",active:"dashboard"===a,onClick:()=>b("dashboard")}),(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2 mt-4",children:"Operations"}),(0,g.jsx)(O,{label:"DB",active:"db"===a,onClick:()=>b("db")}),(0,g.jsx)(O,{label:"Redis Cache",active:"redis"===a,onClick:()=>b("redis")}),(0,g.jsx)(O,{label:"Sync",active:"sync"===a,onClick:()=>b("sync")}),(0,g.jsx)(O,{label:"Generate",active:"generate"===a,onClick:()=>b("generate")}),(0,g.jsx)("div",{className:"uppercase text-[11px] tracking-[0.2em] text-slate-400 px-2 mt-4",children:"Content"}),(0,g.jsx)(O,{label:"Editor",active:"editor"===a,onClick:()=>b("editor")}),(0,g.jsx)(O,{label:"Images",active:"images"===a,onClick:()=>b("images")})]}),(0,g.jsx)("div",{className:"px-6 py-4 border-t border-slate-200 text-xs text-slate-500",children:"v2 • Next.js + Supabase"})]}),(0,g.jsxs)("main",{className:"flex-1",children:[(0,g.jsxs)("header",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Dashboard"}),(0,g.jsx)("div",{className:"text-2xl font-semibold text-slate-800",children:"Control Panel"})]}),(0,g.jsx)("div",{className:"flex items-center gap-3",children:(0,g.jsx)("button",{onClick:N,className:"rounded-full bg-slate-800 text-white px-4 py-2 text-sm font-semibold hover:bg-slate-900",children:"Refresh"})})]}),(0,g.jsxs)("div",{className:"p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,g.jsx)(k,{title:"API",value:n?"Down":"Up",badge:n?"Check":"Healthy",tone:n?"red":"green",subtitle:n||"OK"}),(0,g.jsx)(k,{title:"DB",value:e?.tables?.filter(a=>a.exists).length||0,badge:"tables",tone:"indigo",subtitle:"Supabase"}),(0,g.jsx)(k,{title:"Redis",value:"Cache",badge:"Ops",tone:"cyan",subtitle:"Cache to Redis"}),(0,g.jsx)(k,{title:"Sync",value:"Ready",badge:"Files",tone:"orange",subtitle:"Public → DB"})]}),["dashboard","db","redis","sync","generate"].includes(a)&&(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Operations"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"DB, Redis, Sync, Generate"})]})}),r&&(0,g.jsx)("div",{className:`mb-4 p-4 rounded-xl border ${"error"===r.type?"bg-red-50 border-red-200 text-red-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:(0,g.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:"object"==typeof r.text?JSON.stringify(r.text,null,2):r.text})}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[("generate"===a||"dashboard"===a)&&(0,g.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 bg-slate-50",children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Generate"}),(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,g.jsx)(l,{label:"Generate URLs",onClick:U,loading:"generate-urls"===p,tone:"slate"})})]}),("redis"===a||"dashboard"===a)&&(0,g.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 bg-slate-50",children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Redis"}),(0,g.jsx)("div",{className:"flex flex-wrap gap-2",children:(0,g.jsx)(l,{label:"Cache to Redis",onClick:V,loading:"cache-all"===p,tone:"cyan"})})]}),("db"===a||"dashboard"===a)&&(0,g.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 bg-slate-50",children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Database"}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,g.jsx)(l,{label:"Create Tables",onClick:()=>Q("createdb"),loading:"createdb"===p,tone:"amber"}),(0,g.jsx)(l,{label:"DB Status",onClick:()=>Q("status"),loading:"status"===p,tone:"indigo"}),(0,g.jsx)(l,{label:"Create DB",onClick:()=>Q("createdb"),disabled:Y,loading:"createdb"===p,tone:"emerald"}),(0,g.jsx)(l,{label:"Delete DB",onClick:()=>Q("deletedb"),disabled:!X,loading:"deletedb"===p,tone:"rose"}),(0,g.jsx)(l,{label:"Pump Data",onClick:()=>Q("pumpdata"),disabled:!Y,loading:"pumpdata"===p,tone:"orange"})]})]}),("sync"===a||"dashboard"===a)&&(0,g.jsxs)("div",{className:"rounded-2xl border border-slate-200 p-4 bg-slate-50",children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400 mb-2",children:"Sync"}),(0,g.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,g.jsx)(l,{label:"Collections",onClick:()=>T("collections"),loading:"collections"===p,tone:"blue"}),(0,g.jsx)(l,{label:"Config",onClick:()=>T("config"),loading:"config"===p,tone:"blue"}),(0,g.jsx)(l,{label:"Data",onClick:()=>T("data"),loading:"data"===p,tone:"blue"}),(0,g.jsx)(l,{label:"Files",onClick:()=>T("files"),loading:"files"===p,tone:"blue"}),(0,g.jsx)(l,{label:"Images",onClick:()=>T("image"),loading:"image"===p,tone:"blue"}),(0,g.jsx)(l,{label:"JS",onClick:()=>T("js"),loading:"js"===p,tone:"blue"}),(0,g.jsx)(l,{label:"Resume",onClick:()=>T("resume"),loading:"resume"===p,tone:"blue"})]})]})]}),x&&(0,g.jsxs)("div",{className:"mt-4 p-3 rounded-xl bg-slate-50 border border-slate-200 text-sm",children:[(0,g.jsx)("div",{className:"font-semibold text-slate-800",children:x.table}),(0,g.jsxs)("div",{className:"text-slate-600",children:["Status: ",x.status,x.records?` • ${x.records} records`:"",x.message?` • ${x.message}`:""]})]}),z&&(0,g.jsx)("div",{className:"mt-4 p-3 rounded-xl bg-indigo-50 border border-indigo-200 text-sm text-indigo-900",children:(0,g.jsx)("pre",{className:"whitespace-pre-wrap break-words",children:JSON.stringify(z,null,2)})})]}),"editor"===a&&(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Content Editor"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"Update DB Contents"}),(0,g.jsx)("div",{className:"text-sm text-slate-500",children:"Edit JSON/text and push to Supabase tables."})]})}),L&&(0,g.jsx)("div",{className:`mb-3 p-3 rounded-xl border ${"error"===L.type?"bg-rose-50 border-rose-200 text-rose-700":"bg-emerald-50 border-emerald-200 text-emerald-700"}`,children:L.text}),(0,g.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-3",children:[(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Table"}),(0,g.jsxs)("select",{value:B,onChange:a=>C(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm",children:[(0,g.jsx)("option",{value:"collections",children:"collections"}),(0,g.jsx)("option",{value:"config_files",children:"config_files"}),(0,g.jsx)("option",{value:"data_files",children:"data_files"}),(0,g.jsx)("option",{value:"static_files",children:"static_files"}),(0,g.jsx)("option",{value:"javascript_files",children:"javascript_files"})]})]}),"collections"===B&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Lang"}),(0,g.jsx)("input",{value:D,onChange:a=>E(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Type"}),(0,g.jsx)("input",{value:F,onChange:a=>G(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Filename (no extension)"}),(0,g.jsx)("input",{value:H,onChange:a=>I(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm"})]})]}),(0,g.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,g.jsx)("label",{className:"text-xs font-semibold text-slate-600",children:"Content (JSON or text)"}),(0,g.jsx)("textarea",{value:J,onChange:a=>K(a.target.value),className:"rounded-lg border border-slate-200 px-3 py-2 text-sm min-h-[120px] font-mono"})]}),(0,g.jsx)("div",{className:"mt-4 flex gap-2",children:(0,g.jsx)("button",{onClick:W,className:"rounded-lg bg-emerald-600 text-white px-4 py-2 font-semibold hover:bg-emerald-700",children:"Save"})})]}),"images"===a&&(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Images"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Manage Images"}),(0,g.jsx)("p",{className:"text-sm text-slate-600 mb-4",children:"Use Sync → Images to populate the `images` table. Future image tools will appear here."}),(0,g.jsx)(l,{label:"Sync Images",onClick:()=>T("image"),loading:"image"===p,tone:"blue"})]}),"dashboard"===a&&(0,g.jsxs)("section",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm p-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("div",{className:"text-xs uppercase tracking-[0.2em] text-slate-400",children:"Logs"}),(0,g.jsx)("div",{className:"text-lg font-semibold text-slate-800",children:"Latest API Logs"})]}),(0,g.jsx)("button",{onClick:R,className:"text-sm text-slate-600 hover:text-slate-900",children:t?"Hide":"View Logs"})]}),t&&(0,g.jsxs)("div",{className:"space-y-2 max-h-64 overflow-auto text-sm",children:[(0,g.jsx)("button",{onClick:S,className:"text-xs text-slate-600 hover:text-slate-900 mb-2",children:"Refresh Logs"}),(0,g.jsx)(i,{data:v})]})]})]})]})]})})}function k({title:a,value:b,badge:c,subtitle:d,tone:e="slate"}){return(0,g.jsxs)("div",{className:`rounded-2xl border ${function(a){switch(a){case"green":return"bg-emerald-50 text-emerald-800 border-emerald-200";case"red":return"bg-rose-50 text-rose-800 border-rose-200";case"indigo":return"bg-indigo-50 text-indigo-800 border-indigo-200";case"cyan":return"bg-cyan-50 text-cyan-800 border-cyan-200";case"orange":return"bg-orange-50 text-orange-800 border-orange-200";default:return"bg-slate-50 text-slate-800 border-slate-200"}}(e)} p-4 shadow-sm`,children:[(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("div",{className:"text-sm font-semibold text-slate-500",children:a}),(0,g.jsx)("span",{className:"text-xs px-2 py-1 rounded-full bg-white/80 border border-white text-slate-600",children:c})]}),(0,g.jsx)("div",{className:"mt-2 text-2xl font-bold",children:b}),(0,g.jsx)("div",{className:"text-xs text-slate-500 mt-1",children:d})]})}function l({label:a,onClick:b,loading:c,disabled:d,tone:e="slate"}){return(0,g.jsx)("button",{onClick:b,disabled:d||c,className:`${{slate:"bg-slate-900 hover:bg-black text-white",cyan:"bg-cyan-600 hover:bg-cyan-700 text-white",amber:"bg-amber-500 hover:bg-amber-600 text-white",indigo:"bg-indigo-600 hover:bg-indigo-700 text-white",emerald:"bg-emerald-600 hover:bg-emerald-700 text-white",rose:"bg-rose-600 hover:bg-rose-700 text-white",orange:"bg-orange-500 hover:bg-orange-600 text-white",blue:"bg-sky-600 hover:bg-sky-700 text-white"}[e]} rounded-xl px-4 py-3 text-sm font-semibold shadow-sm disabled:opacity-50 disabled:cursor-not-allowed`,children:c?"Working...":a})}a.s(["default",()=>j],13715);var m=a.i(13715),n=a.i(9193);let o=(0,d.hoist)(m,"default"),p=(0,d.hoist)(m,"getStaticProps"),q=(0,d.hoist)(m,"getStaticPaths"),r=(0,d.hoist)(m,"getServerSideProps"),s=(0,d.hoist)(m,"config"),t=(0,d.hoist)(m,"reportWebVitals"),u=(0,d.hoist)(m,"unstable_getStaticProps"),v=(0,d.hoist)(m,"unstable_getStaticPaths"),w=(0,d.hoist)(m,"unstable_getStaticParams"),x=(0,d.hoist)(m,"unstable_getServerProps"),y=(0,d.hoist)(m,"unstable_getServerSideProps"),z=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:m}),A=(0,n.getHandler)({srcPage:"/index",config:s,userland:m,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});a.s(["config",0,s,"default",0,o,"getServerSideProps",0,r,"getStaticPaths",0,q,"getStaticProps",0,p,"handler",0,A,"reportWebVitals",0,t,"routeModule",0,z,"unstable_getServerProps",0,x,"unstable_getServerSideProps",0,y,"unstable_getStaticParams",0,w,"unstable_getStaticPaths",0,v,"unstable_getStaticProps",0,u],71600)}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_pages_fbac2314.js.map