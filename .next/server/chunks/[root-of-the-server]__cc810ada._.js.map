{"version":3,"sources":["../../../lib/logger.js","../../../lib/supabase.js","../../../lib/postgres.js","../../../lib/sync-config.js","../../../lib/dbop.js"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\n\n// Log file path - in .next/static for Vercel (writable)\nconst getLogPath = () => {\n  const dir = path.join(process.cwd(), '.next/static/logs');\n  if (!fs.existsSync(dir)) {\n    try {\n      fs.mkdirSync(dir, { recursive: true });\n    } catch (error) {\n      console.error('Could not create log directory:', error);\n    }\n  }\n  return path.join(dir, 'api-logs.jsonl');\n};\n\nconst logs = [];\nconst MAX_LOGS = 1000; // Keep last 1000 logs in memory\n\nexport function logRequest(req, context = {}) {\n  const log = {\n    timestamp: new Date().toISOString(),\n    type: 'REQUEST',\n    method: req.method,\n    url: req.url,\n    headers: {\n      // Next.js Request uses the WHATWG Headers API\n      'content-type': typeof req.headers?.get === 'function' ? req.headers.get('content-type') : undefined,\n      'user-agent': typeof req.headers?.get === 'function' ? req.headers.get('user-agent') : undefined,\n    },\n    body: req.body || null,\n    ...context,\n  };\n  \n  // IMPORTANT: Log to console so it appears in Vercel logs\n  console.log(`[REQUEST] ${log.method} ${log.url}`, log);\n  \n  addLog(log);\n  return log;\n}\n\nexport function logResponse(statusCode, data, context = {}) {\n  const log = {\n    timestamp: new Date().toISOString(),\n    type: 'RESPONSE',\n    statusCode,\n    data,\n    ...context,\n  };\n  \n  // IMPORTANT: Log to console so it appears in Vercel logs\n  console.log(`[RESPONSE] Status ${statusCode}`, log);\n  \n  addLog(log);\n  return log;\n}\n\nexport function logDatabase(operation, table, details = {}) {\n  const log = {\n    timestamp: new Date().toISOString(),\n    type: 'DATABASE',\n    operation, // SELECT, INSERT, UPDATE, DELETE, CREATE, DROP\n    table,\n    ...details,\n  };\n  \n  // IMPORTANT: Log to console so it appears in Vercel logs\n  console.log(`[DATABASE] ${operation} on ${table}`, log);\n  \n  addLog(log);\n  return log;\n}\n\nexport function logError(error, context = {}) {\n  const log = {\n    timestamp: new Date().toISOString(),\n    type: 'ERROR',\n    message: error.message,\n    stack: error.stack,\n    ...context,\n  };\n  \n  // IMPORTANT: Log to console so it appears in Vercel logs\n  console.error(`[ERROR] ${error.message}`, log);\n  \n  addLog(log);\n  return log;\n}\n\nfunction addLog(log) {\n  logs.push(log);\n  \n  // Keep only last MAX_LOGS in memory\n  if (logs.length > MAX_LOGS) {\n    logs.shift();\n  }\n\n  // Note: File writing disabled for Vercel (ephemeral filesystem)\n  // All logs are available via console.log (visible in Vercel dashboard) and in-memory storage\n}\n\nexport function getLogs(filter = {}) {\n  let filtered = [...logs];\n\n  if (filter.type) {\n    filtered = filtered.filter(log => log.type === filter.type);\n  }\n\n  if (filter.table) {\n    filtered = filtered.filter(log => log.table === filter.table);\n  }\n\n  if (filter.operation) {\n    filtered = filtered.filter(log => log.operation === filter.operation);\n  }\n\n  if (filter.limit) {\n    filtered = filtered.slice(-filter.limit);\n  }\n\n  return filtered;\n}\n\nexport function clearLogs() {\n  logs.length = 0;\n  console.log('[LOGS] Cleared all in-memory logs');\n}\n","const { createClient } = require('@supabase/supabase-js');\n\nfunction getSupabase() {\n  const url = process.env.SUPABASE_URL || '';\n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY || '';\n  if (!url || !key) {\n    throw new Error('Supabase configuration missing: set SUPABASE_URL and SUPABASE_SERVICE_ROLE_KEY');\n  }\n  return createClient(url, key);\n}\n\nmodule.exports = { getSupabase };\n","// Lightweight Postgres client using DATABASE_URL\n// If DATABASE_URL is not set, this will export null.\n\nconst postgres = require('postgres');\n\nconst connectionString = process.env.DATABASE_URL;\nconst isProd = process.env.NODE_ENV === 'production';\nlet sql = null;\n\nif (connectionString && typeof connectionString === 'string' && connectionString.length > 0) {\n  try {\n    // Enforce SSL in production; prefer in non-prod\n    const sslMode = isProd ? 'require' : 'prefer';\n    // Guard against accidental client-side import\n    if (typeof window !== 'undefined') {\n      throw new Error('Postgres client should not be imported in browser code');\n    }\n    sql = postgres(connectionString, {\n      max: 5,\n      prepare: true,\n      ssl: sslMode,\n    });\n    console.log('[POSTGRES] Client initialized with DATABASE_URL');\n  } catch (err) {\n    console.error('[POSTGRES] Failed to initialize client:', err.message);\n    sql = null;\n  }\n}\n\nmodule.exports = sql;\n","const path = require('path');\n\nconst ALLOWED_EXTENSIONS = [\n  '.json', '.js', '.xml', '.html', '.txt', '.pdf',\n  '.png', '.jpg', '.jpeg', '.gif', '.svg', '.webp', '.docx'\n];\n\nconst IGNORED_DIRS = ['.next', 'node_modules', '.git'];\n\nfunction getPublicDir() {\n  const override = process.env.PUBLIC_DIR;\n  return override && override.trim() ? path.resolve(override) : path.join(process.cwd(), 'public');\n}\n\nfunction getFileExtension(filename) {\n  return path.extname(filename).toLowerCase().slice(1) || 'unknown';\n}\n\nfunction mapFileToTable(filePath) {\n  if (filePath.includes(`${path.sep}collections${path.sep}`)) {\n    return { table: 'collections', fileType: 'json' };\n  }\n  if (filePath.includes(`${path.sep}files${path.sep}`)) {\n    const ext = getFileExtension(filePath);\n    return { table: 'static_files', fileType: ext };\n  }\n  if (filePath.includes(`${path.sep}config${path.sep}`)) {\n    const ext = getFileExtension(filePath);\n    return { table: 'config_files', fileType: ext };\n  }\n  if (filePath.includes(`${path.sep}data${path.sep}`)) {\n    const ext = getFileExtension(filePath);\n    return { table: 'data_files', fileType: ext };\n  }\n  if (filePath.includes(`${path.sep}image${path.sep}`)) {\n    return { table: 'images', fileType: getFileExtension(filePath) };\n  }\n  if (filePath.includes(`${path.sep}js${path.sep}`)) {\n    return { table: 'javascript_files', fileType: 'js' };\n  }\n  if (filePath.includes(`${path.sep}resume${path.sep}`)) {\n    return { table: 'resumes', fileType: getFileExtension(filePath) };\n  }\n  return { table: 'unknown', fileType: getFileExtension(filePath) };\n}\n\nmodule.exports = {\n  ALLOWED_EXTENSIONS,\n  IGNORED_DIRS,\n  getPublicDir,\n  getFileExtension,\n  mapFileToTable,\n};\n","// Unified DB operations using DATABASE_URL (postgres) with Supabase fallback\nconst postgres = require('postgres');\nconst { createClient } = require('@supabase/supabase-js');\n\nconst TABLES = ['collections','static_files','config_files','data_files','images','resumes','javascript_files','sync_manifest'];\n\nfunction getSqlClient() {\n  const url = process.env.DATABASE_URL;\n  if (!url) return null;\n  try {\n    const sql = postgres(url, { max: 5, prepare: true, ssl: 'prefer' });\n    return sql;\n  } catch (err) {\n    console.error('[DBOP] Postgres init error:', err.message);\n    return null;\n  }\n}\n\nfunction getSupabaseClient() {\n  const url = process.env.SUPABASE_URL || '';\n  const key = process.env.SUPABASE_SERVICE_ROLE_KEY || '';\n  if (!url || !key) return null;\n  try {\n    return createClient(url, key);\n  } catch (err) {\n    console.error('[DBOP] Supabase init error:', err.message);\n    return null;\n  }\n}\n\nfunction db() {\n  const sql = getSqlClient();\n  const supabase = sql ? null : getSupabaseClient();\n  const mode = sql ? 'postgres' : (supabase ? 'supabase' : 'none');\n  if (mode === 'none') {\n    throw new Error('No database configured: set DATABASE_URL or SUPABASE_URL + SUPABASE_SERVICE_ROLE_KEY');\n  }\n  return { mode, sql, supabase };\n}\n\nasync function createdb() {\n  const { mode, sql, supabase } = db();\n  const statements = [\n    `CREATE TABLE IF NOT EXISTS collections (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), lang VARCHAR(10), type VARCHAR(20), filename VARCHAR(255), file_content JSONB, file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now(), UNIQUE(lang, type, filename))`,\n    `CREATE TABLE IF NOT EXISTS static_files (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_type VARCHAR(50), file_content TEXT, file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS config_files (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_type VARCHAR(50), file_content JSONB, file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS data_files (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_type VARCHAR(50), file_content JSONB, file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS images (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_path VARCHAR(512), mime_type VARCHAR(50), file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS resumes (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_type VARCHAR(50), file_path VARCHAR(512), file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS javascript_files (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), filename VARCHAR(255) UNIQUE, file_path VARCHAR(512), file_content TEXT, file_hash VARCHAR(64), synced_at TIMESTAMP DEFAULT now(), created_at TIMESTAMP DEFAULT now(), updated_at TIMESTAMP DEFAULT now())`,\n    `CREATE TABLE IF NOT EXISTS sync_manifest (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), file_path VARCHAR(512) UNIQUE, file_hash VARCHAR(64), table_name VARCHAR(50), last_synced TIMESTAMP DEFAULT now())`,\n    `CREATE INDEX IF NOT EXISTS idx_collections_lang ON collections(lang)`,\n    `CREATE INDEX IF NOT EXISTS idx_sync_manifest_path ON sync_manifest(file_path)`\n  ];\n  if (mode === 'postgres') {\n    let created = 0;\n    for (const stmt of statements) {\n      try { await sql.unsafe(stmt); created++; } catch (err) { console.warn('[DBOP] createDB warn:', err.message); }\n    }\n    return { status: 'success', operation: 'createdb', statements_executed: created };\n  } else {\n    let created = 0;\n    for (const stmt of statements) {\n      try { await supabase.rpc('exec_sql', { sql: stmt }); created++; } catch (err) { if (!String(err.message).includes('exists')) console.warn('[DBOP] createDB warn:', err.message); }\n    }\n    return { status: 'success', operation: 'createdb', statements_executed: created };\n  }\n}\n\nasync function deletedb() {\n  const { mode, sql, supabase } = db();\n  let cleared = 0;\n  if (mode === 'postgres') {\n    for (const table of TABLES) {\n      try { await sql.unsafe(`DELETE FROM ${table}`); cleared++; } catch (err) { console.warn('[DBOP] delete warn:', table, err.message); }\n    }\n  } else {\n    for (const table of TABLES) {\n      try { await supabase.from(table).delete().neq('id', null); cleared++; } catch (err) { console.warn('[DBOP] delete warn:', table, err.message); }\n    }\n  }\n  return { status: 'success', operation: 'deletedb', tables_cleared: cleared };\n}\n\nasync function count(table) {\n  const { mode, sql, supabase } = db();\n  if (mode === 'postgres') {\n    try { const rows = await sql`SELECT COUNT(*)::int AS count FROM ${sql(table)}`; return rows?.[0]?.count || 0; } catch { return 0; }\n  } else {\n    try { const { count } = await supabase.from(table).select('*', { count: 'exact', head: true }); return count || 0; } catch { return 0; }\n  }\n}\n\nasync function getManifest() {\n  const { mode, sql, supabase } = db();\n  if (mode === 'postgres') {\n    try { return await sql`SELECT file_path, file_hash, table_name FROM sync_manifest`; } catch { return []; }\n  } else {\n    const { data, error } = await supabase.from('sync_manifest').select('*');\n    if (error) return [];\n    return data || [];\n  }\n}\n\nasync function upsertManifest(entry) {\n  const { mode, sql, supabase } = db();\n  if (mode === 'postgres') {\n    try {\n      await sql`\n        INSERT INTO sync_manifest (file_path, file_hash, table_name, last_synced)\n        VALUES (${entry.file_path}, ${entry.file_hash}, ${entry.table_name}, ${entry.last_synced})\n        ON CONFLICT (file_path) DO UPDATE SET file_hash = EXCLUDED.file_hash, table_name = EXCLUDED.table_name, last_synced = EXCLUDED.last_synced\n      `;\n      return true;\n    } catch { return false; }\n  } else {\n    try {\n      await supabase.from('sync_manifest').upsert(entry, { onConflict: 'file_path' });\n      return true;\n    } catch { return false; }\n  }\n}\n\nmodule.exports = { db, createdb, deletedb, count, getManifest, upsertManifest, TABLES };\n"],"names":[],"mappings":"yYAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAeA,IAAM,EAAO,EAAE,CAGR,SAAS,EAAW,CAAG,CAAE,EAAU,CAAC,CAAC,EAC1C,IAAM,EAAM,CACV,UAAW,IAAI,OAAO,WAAW,GACjC,KAAM,UACN,OAAQ,EAAI,MAAM,CAClB,IAAK,EAAI,GAAG,CACZ,QAAS,CAEP,eAAgB,AAA4B,mBAArB,EAAI,OAAO,EAAE,IAAqB,EAAI,OAAO,CAAC,GAAG,CAAC,qBAAkB,EAC3F,aAA0C,YAA5B,OAAO,EAAI,OAAO,EAAE,IAAqB,EAAI,OAAO,CAAC,GAAG,CAAC,mBAAgB,CACzF,EACA,KAAM,EAAI,IAAI,EAAI,KAClB,GAAG,CAAO,AACZ,EAMA,OAHA,QAAQ,GAAG,CAAC,CAAC,UAAU,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,GAAG,CAAA,CAAE,CAAE,GAElD,EAAO,GACA,CACT,CAEO,SAAS,EAAY,CAAU,CAAE,CAAI,CAAE,EAAU,CAAC,CAAC,EACxD,IAAM,EAAM,CACV,UAAW,IAAI,OAAO,WAAW,GACjC,KAAM,sBACN,OACA,EACA,GAAG,CAAO,AACZ,EAMA,OAHA,QAAQ,GAAG,CAAC,CAAC,kBAAkB,EAAE,EAAA,CAAY,CAAE,GAE/C,EAAO,GACA,CACT,CAEO,SAAS,EAAY,CAAS,CAAE,CAAK,CAAE,EAAU,CAAC,CAAC,EACxD,IAAM,EAAM,CACV,UAAW,IAAI,OAAO,WAAW,GACjC,KAAM,qBACN,QACA,EACA,GAAG,CAAO,AACZ,EAMA,OAHA,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,EAAU,IAAI,EAAE,EAAA,CAAO,CAAE,GAEnD,EAAO,GACA,CACT,CAEO,SAAS,EAAS,CAAK,CAAE,EAAU,CAAC,CAAC,EAC1C,IAAM,EAAM,CACV,UAAW,IAAI,OAAO,WAAW,GACjC,KAAM,QACN,QAAS,EAAM,OAAO,CACtB,MAAO,EAAM,KAAK,CAClB,GAAG,CAAO,AACZ,EAMA,OAHA,QAAQ,KAAK,CAAC,CAAC,QAAQ,EAAE,EAAM,OAAO,CAAA,CAAE,CAAE,GAE1C,EAAO,GACA,CACT,CAEA,SAAS,EAAO,CAAG,EACjB,EAAK,IAAI,CAAC,GAGN,EAAK,MAAM,CA5EA,EA4EG,GAChB,CA7EmB,CA6Ed,KADqB,AAChB,EAKd,CAEO,SAAS,EAAQ,EAAS,CAAC,CAAC,EACjC,IAAI,EAAW,AArFsC,IAqFlC,EAAK,CAkBxB,OAhBI,EAAO,IAAI,EAAE,CACf,EAAW,EAAS,MAAM,CAAC,GAAO,EAAI,IAAI,GAAK,EAAO,KAAI,EAGxD,EAAO,KAAK,EAAE,CAChB,EAAW,EAAS,MAAM,CAAC,GAAO,EAAI,KAAK,GAAK,EAAO,MAAK,EAG1D,EAAO,SAAS,EAAE,CACpB,EAAW,EAAS,MAAM,CAAC,GAAO,EAAI,SAAS,GAAK,EAAO,UAAS,EAGlE,EAAO,KAAK,EAAE,CAChB,EAAW,EAAS,KAAK,CAAC,CAAC,EAAO,MAAK,EAGlC,CACT,qHCzHA,GAAM,cAAE,CAAY,CAAE,CAAA,EAAA,CAAA,CAAA,MAWtB,GAAO,OAAO,CAAG,CAAE,YATnB,SAAS,EACP,IAAM,EAAM,QAAQ,GAAG,CAAC,YAAY,EAAI,GAClC,EAAM,QAAQ,GAAG,CAAC,yBAAyB,EAAI,GACrD,GAAI,CAAC,GAAO,CAAC,EACX,GADgB,GACN,AAAJ,MAAU,kFAElB,OAAO,EAAa,EAAK,EAC3B,CAE+B,kBCR/B,IAAM,EAAA,EAAA,CAAA,CAAA,OAEA,EAAmB,QAAQ,GAAG,CAAC,YAAY,CAE7C,EAAM,KAEV,GAAI,GAAgD,UAA5B,OAAO,GAAiC,EAAiB,MAAM,CAAG,EACxF,CAD2F,EACvF,CAOF,EAAM,EAAS,EAAkB,CAC/B,IAAK,EACL,SAAS,EACT,IARuB,CAQlB,QACP,GATqC,AAUrC,QAAQ,GAAG,CAAC,kDACd,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,0CAA2C,EAAI,OAAO,EACpE,EAAM,IACR,CAGF,EAAO,OAAO,CAAG,mhCC7BjB,IAAM,EAAA,EAAA,CAAA,CAAA,OAcN,SAAS,EAAiB,CAAQ,EAChC,OAAO,EAAK,OAAO,CAAC,GAAU,WAAW,GAAG,KAAK,CAAC,IAAM,SAC1D,CA8BA,EAAO,OAAO,CAAG,CACf,mBA7CyB,CACzB,QAAS,MAAO,OAAQ,QAAS,OAAQ,OACzC,OAAQ,OAAQ,QAAS,OAAQ,OAAQ,QAAS,QACnD,CA2CC,aAzCmB,CAAC,QAAS,eAAgB,OAAO,CA0CpD,aAxCF,SAAS,EACP,IAAM,EAAW,QAAQ,GAAG,CAAC,UAAU,CACvC,OAAO,GAAY,EAAS,IAAI,GAAK,EAAK,OAAO,CAAC,GAAY,EAAK,IAAI,CAAC,QAAQ,GAAG,GAAI,SACzF,mBAsCE,EACA,eAjCF,SAAS,AAAe,CAAQ,SAC9B,AAAI,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,WAAW,EAAE,EAAK,GAAG,CAAA,CAAE,EAChD,CAAE,AADiD,MAC1C,cAAe,SAAU,MAAO,EAE9C,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,KAAK,EAAE,EAAK,GAAG,CAAA,CAAE,EAE1C,CAF6C,AAE3C,MAAO,eAAgB,SADpB,CAC8B,CADb,EACiB,EAE5C,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,MAAM,EAAE,EAAK,GAAG,CAAA,CAAE,EAE3C,CAF8C,AAE5C,MAAO,eAAgB,SADpB,CAC8B,CADb,EACiB,EAE5C,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,IAAI,EAAE,EAAK,GAAG,CAAA,CAAE,EAEzC,CAF4C,AAE1C,MAAO,aAAc,SADlB,CAC4B,CADX,EACe,EAE1C,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,KAAK,EAAE,EAAK,GAAG,CAAA,CAAE,EAC1C,CAD6C,AAC3C,MAAO,SAAU,SAAU,EAAiB,EAAU,EAE7D,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,EAAE,EAAE,EAAK,GAAG,CAAA,CAAE,EACvC,CAD0C,AACxC,MAAO,mBAAoB,SAAU,IAAK,EAEjD,EAAS,QAAQ,CAAC,CAAA,EAAG,EAAK,GAAG,CAAC,MAAM,EAAE,EAAK,GAAG,CAAA,CAAE,EAC3C,CAD8C,AAC5C,MAAO,UAAW,SAAU,EAAiB,EAAU,EAE3D,CAAE,MAAO,UAAW,SAAU,EAAiB,EAAU,CAClE,CAQA,mBCnDA,IAAM,EAAA,EAAA,CAAA,CAAA,OACA,cAAE,CAAY,CAAE,CAAA,EAAA,CAAA,CAAA,OAEhB,EAAS,CAAC,cAAc,eAAe,eAAe,aAAa,SAAS,UAAU,mBAAmB,gBAAgB,CA0B/H,SAAS,IACP,IAAM,EAzBR,AAyBc,SAzBL,EACP,IAAM,EAAM,QAAQ,GAAG,CAAC,YAAY,CACpC,GAAI,CAAC,EAAK,OAAO,KACjB,GAAI,CAEF,OAAO,AADK,EAAS,EAAK,CAAE,IAAK,EAAG,SAAS,EAAM,IAAK,QAAS,EAEnE,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,8BAA+B,EAAI,OAAO,EACjD,IACT,CACF,IAgBQ,EAAW,EAAM,KAdzB,AAcgC,SAdvB,EACP,IAAM,EAAM,QAAQ,GAAG,CAAC,YAAY,EAAI,GAClC,EAAM,QAAQ,GAAG,CAAC,yBAAyB,EAAI,GACrD,GAAI,CAAC,GAAO,CAAC,EAAK,OAAO,KACzB,GAAI,CACF,OAAO,EAAa,EAAK,EAC3B,CAAE,MAAO,EAAK,CAEZ,OADA,QAAQ,KAAK,CAAC,8BAA+B,EAAI,OAAO,EACjD,IACT,CACF,IAKQ,EAAO,EAAM,WAAc,EAAW,WAAa,OACzD,GAAa,QAAQ,CAAjB,EACF,MAAM,AAAI,MAAM,wFAElB,MAAO,MAAE,EAAM,MAAK,UAAS,CAC/B,CAEA,eAAe,IACb,GAAM,MAAE,CAAI,KAAE,CAAG,UAAE,CAAQ,CAAE,CAAG,IAC1B,EAAa,CACjB,CAAC,qUAAqU,CAAC,CACvU,CAAC,iSAAiS,CAAC,CACnS,CAAC,kSAAkS,CAAC,CACpS,CAAC,gSAAgS,CAAC,CAClS,CAAC,gSAAgS,CAAC,CAClS,CAAC,iSAAiS,CAAC,CACnS,CAAC,sSAAsS,CAAC,CACxS,CAAC,2MAA2M,CAAC,CAC7M,CAAC,oEAAoE,CAAC,CACtE,CAAC,6EAA6E,CAAC,CAChF,CACD,GAAa,aAAT,EAAqB,CACvB,IAAI,EAAU,EACd,IAAK,IAAM,KAAQ,EACjB,GAAI,CAAE,KADuB,CACjB,EAAI,MAAM,CAAC,GAAO,GAAW,CAAE,MAAO,EAAK,CAAE,QAAQ,IAAI,CAAC,wBAAyB,EAAI,OAAO,CAAG,CAE/G,MAAO,CAAE,OAAQ,UAAW,UAAW,WAAY,oBAAqB,CAAQ,CAClF,CAAO,CACL,IAAI,EAAU,EACd,IAAK,IAAM,KAAQ,EACjB,GAAI,CAAE,KADuB,CACjB,EAAS,GAAG,CAAC,WAAY,CAAE,IAAK,CAAK,GAAI,GAAW,CAAE,MAAO,EAAK,CAAO,AAAD,OAAQ,EAAI,OAAO,EAAE,QAAQ,CAAC,WAAW,QAAQ,IAAI,CAAC,wBAAyB,EAAI,OAAO,CAAG,CAEnL,MAAO,CAAE,OAAQ,UAAW,UAAW,WAAY,oBAAqB,CAAQ,CAClF,CACF,CAEA,eAAe,IACb,GAAM,MAAE,CAAI,KAAE,CAAG,UAAE,CAAQ,CAAE,CAAG,IAC5B,EAAU,EACd,GAAa,YAAY,CAArB,EACF,IAAK,IAAM,KAAS,EAClB,GAAI,CAAE,CADoB,KACd,EAAI,MAAM,CAAC,CAAC,YAAY,EAAE,EAAA,CAAO,EAAG,GAAW,CAAE,MAAO,EAAK,CAAE,QAAQ,IAAI,CAAC,sBAAuB,EAAO,EAAI,OAAO,CAAG,MAGtI,IAAK,IAAM,KAAS,EAClB,GAAI,CAAE,CADoB,KACd,EAAS,IAAI,CAAC,GAAO,MAAM,GAAG,GAAG,CAAC,KAAM,MAAO,GAAW,CAAE,MAAO,EAAK,CAAE,QAAQ,IAAI,CAAC,sBAAuB,EAAO,EAAI,OAAO,CAAG,CAGnJ,MAAO,CAAE,OAAQ,UAAW,UAAW,WAAY,eAAgB,CAAQ,CAC7E,CAEA,eAAe,EAAM,CAAK,EACxB,GAAM,MAAE,CAAI,KAAE,CAAG,UAAE,CAAQ,CAAE,CAAG,IAChC,GAAI,AAAS,YAAY,GACvB,GAAI,CAAE,IAAM,EAAO,MAAM,CAAG,CAAC,mCAAmC,EAAE,EAAI,GAAO,CAAC,CAAE,OAAO,GAAM,CAAC,EAAE,EAAE,OAAS,CAAG,CAAE,KAAM,CAAE,OAAO,CAAG,CAElI,GAAI,CAAE,GAAM,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,GAAO,MAAM,CAAC,IAAK,CAAE,MAAO,QAAS,MAAM,CAAK,GAAI,OAAO,GAAS,CAAG,CAAE,KAAM,CAAE,OAAO,CAAG,CAE3I,CAEA,eAAe,IACb,GAAM,MAAE,CAAI,KAAE,CAAG,UAAE,CAAQ,CAAE,CAAG,IAChC,GAAa,YAAY,CAArB,EACF,GAAI,CAAE,OAAO,MAAM,CAAG,CAAC,0DAA0D,CAAC,AAAE,CAAE,KAAM,CAAE,MAAO,EAAE,AAAE,CACpG,CACL,GAAM,CAAE,MAAI,OAAE,CAAK,CAAE,CAAG,MAAM,EAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC,YACpE,AAAI,EAAc,EAAE,CACb,EADI,CACI,EAAE,AACnB,CACF,CAEA,eAAe,EAAe,CAAK,EACjC,GAAM,MAAE,CAAI,KAAE,CAAG,CAAE,UAAQ,CAAE,CAAG,IAChC,GAAa,YAAY,CAArB,EACF,GAAI,CAMF,OALA,MAAM,CAAG,CAAC;;gBAEA,EAAE,EAAM,SAAS,CAAC,EAAE,EAAE,EAAM,SAAS,CAAC,EAAE,EAAE,EAAM,UAAU,CAAC,EAAE,EAAE,EAAM,WAAW,CAAC;;MAE3F,CAAC,EACM,CACT,CAAE,KAAM,CAAE,OAAO,CAAO,CAExB,GAAI,CAEF,OADA,MAAM,EAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC,EAAO,CAAE,WAAY,WAAY,IACtE,CACT,CAAE,KAAM,CAAE,OAAO,CAAO,CAE5B,CAEA,EAAO,OAAO,CAAG,IAAE,WAAI,WAAU,QAAU,cAAO,iBAAa,SAAgB,CAAO"}